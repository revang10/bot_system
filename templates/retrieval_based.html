{% extends "base.html" %}

{% block title %}Retrieval-based Chatbot{% endblock %}

{% block content %}
<h2>Retrieval-based Chatbot</h2>
<p>This chatbot retrieves answers from a fixed knowledge base.</p>


<script>
  function handlekeypress(event) {
    if (event.key === "Enter") {
      const userInput = document.getElementById("user-input");
      const message = userInput.value.trim();
      if (!message) return;

      appendMessage("You", message);
      userInput.value = "";

      fetch("/chat/retrieval-based", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ "user-input": message })
      })
        .then(response => response.json())
        .then(data => {
          appendMessage("Bot", data.response);
        })
        .catch(error => {
          appendMessage("Bot", "Error: Unable to respond.");
        });
    }
  }

  function appendMessage(sender, message) {
    const chatBox = document.getElementById("chat-messages");
    const msg = document.createElement("p");
    msg.innerHTML = `<strong>${sender}:</strong> ${message}`;
    chatBox.appendChild(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
  }
</script>
{% endblock %}