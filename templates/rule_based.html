{% extends "base.html" %}

{% block title %}Rule-based Chatbot{% endblock %}

{% block content %}
<h2>This is the Rule-based Chatbot Page</h2>
<p>Here you can chat using predefined rules.</p>


<script>
  function handlekeypress(event) {
    if (event.key === "Enter") {
      const userInput = document.getElementById("user-input");
      const message = userInput.value.trim();

      if (message === "") return;

      // Display user message in chat
      appendMessage("You", message);
      userInput.value = ""; // Clear input box

      // Send message to Flask backend
      axios.post("/chat/rule-based", {
        "user-input": message
      }, {
        headers: {
          'Content-Type': 'application/json'  // âœ… Explicitly tell Flask it's JSON
        }
      })
        .then(response => {
          const botReply = response.data.response;
          appendMessage("Bot", botReply);
        })
        .catch(error => {
          console.error("Error:", error);
          appendMessage("Bot", "Oops! Something went wrong.");
        });
    }
  }

  function appendMessage(sender, message) {
    const chatMessages = document.getElementById("chat-messages");
    const newMessage = document.createElement("p");
    newMessage.innerHTML = `<strong>${sender}:</strong> ${message}`;
    chatMessages.appendChild(newMessage);
    chatMessages.scrollTop = chatMessages.scrollHeight; // Auto-scroll
  }
</script>




{% endblock %}